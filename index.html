<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Team Performance Dashboard</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
<div class="container mt-5">
    <h1 class="text-center">Welcome to Training Culture</h1>
    <p class="text-center">Your journey to optimal team performance starts here!</p>

    <div id="teamFormSection">
        <h2>Team Dashboard</h2>
        <form id="teamForm">
            <div class="form-group">
                <label for="teamName">Team Name:</label>
                <input type="text" id="teamName" class="form-control">
            </div>
            <div class="form-group">
                <label for="teamSize">Team Size:</label>
                <input type="number" id="teamSize" class="form-control">
            </div>
            <div class="form-group">
                <label for="teamLead">Team Lead:</label>
                <input type="text" id="teamLead" class="form-control">
            </div>
            <button type="submit" class="btn btn-primary">Submit Team Info</button>
        </form>
    </div>

    <div id="teamDashboardSection" style="display:none;">
        <h2>Team Dashboard</h2>
        <p><strong>Team Name:</strong> <span id="displayTeamName"></span></p>
        <p><strong>Team Size:</strong> <span id="displayTeamSize"></span></p>
        <p><strong>Team Lead:</strong> <span id="displayTeamLead"></span></p>

        <h3>Add Team Member</h3>
        <form id="memberForm">
            <div class="form-group">
                <label for="memberName">Name:</label>
                <input type="text" id="memberName" class="form-control">
            </div>
            <div class="form-group">
                <label for="memberRole">Role:</label>
                <input type="text" id="memberRole" class="form-control">
            </div>
            <div class="form-group">
                <label for="memberTalent">Talent Rating:</label>
                <select id="memberTalent" class="form-control">
                    <option value="Critical">Critical</option>
                    <option value="High">High</option>
                    <option value="Moderate">Moderate</option>
                    <option value="Low">Low</option>
                    <option value="Emerging">Emerging</option>
                </select>
            </div>
            <button type="submit" class="btn btn-primary">Add Member</button>
        </form>

        <h3>Team Members</h3>
        <table class="table table-bordered">
            <thead>
            <tr>
                <th>Name</th>
                <th>Role</th>
                <th>Talent</th>
                <th>Action</th>
            </tr>
            </thead>
            <tbody id="membersTable"></tbody>
        </table>

        <canvas id="talentChart"></canvas>

        <h3>Task Analysis</h3>
        <form id="taskForm">
            <div class="form-group">
                <label for="taskName">Task Name:</label>
                <input type="text" id="taskName" class="form-control">
            </div>
            <div class="form-group">
                <label for="taskImportance">Task Importance:</label>
                <select id="taskImportance" class="form-control">
                    <option value="High">High</option>
                    <option value="Medium">Medium</option>
                    <option value="Low">Low</option>
                </select>
            </div>
            <div class="form-group">
                <label for="taskTimeQuality">Quality of Time Spent on Task:</label>
                <select id="taskTimeQuality" class="form-control">
                    <option value="Excellent">Excellent</option>
                    <option value="Good">Good</option>
                    <option value="Fair">Fair</option>
                    <option value="Poor">Poor</option>
                </select>
            </div>
            <div class="form-group">
                <label for="taskSkills">Skills Required:</label>
                <input type="text" id="taskSkills" class="form-control">
            </div>
            <button type="submit" class="btn btn-primary">Add Task</button>
        </form>

        <h3>Tasks for <span id="taskMemberName"></span></h3>
        <table class="table table-bordered">
            <thead>
            <tr>
                <th>Task Name</th>
                <th>Importance</th>
                <th>Quality of Time</th>
                <th>Skills Required</th>
            </tr>
            </thead>
            <tbody id="tasksTable"></tbody>
        </table>
    </div>
</div>

<script>
    let team = {};
    let members = [];
    let memberTasks = {};

    document.getElementById('teamForm').addEventListener('submit', function (e) {
        e.preventDefault();
        team.name = document.getElementById('teamName').value;
        team.size = document.getElementById('teamSize').value;
        team.lead = document.getElementById('teamLead').value;

        document.getElementById('displayTeamName').textContent = team.name;
        document.getElementById('displayTeamSize').textContent = team.size;
        document.getElementById('displayTeamLead').textContent = team.lead;

        document.getElementById('teamFormSection').style.display = 'none';
        document.getElementById('teamDashboardSection').style.display = 'block';
    });

    document.getElementById('memberForm').addEventListener('submit', function (e) {
        e.preventDefault();
        const name = document.getElementById('memberName').value;
        const role = document.getElementById('memberRole').value;
        const talent = document.getElementById('memberTalent').value;

        members.push({ name, role, talent });
        memberTasks[name] = [];
        updateMembersTable();
        updateChart();
        document.getElementById('memberForm').reset();
    });

    function updateMembersTable() {
        const table = document.getElementById('membersTable');
        table.innerHTML = '';
        members.forEach(member => {
            const row = document.createElement('tr');
            row.innerHTML = `
                <td>${member.name}</td>
                <td>${member.role}</td>
                <td>${member.talent}</td>
                <td><button class="btn btn-danger btn-sm" onclick="deleteMember('${member.name}')">Delete</button></td>
            `;
            row.addEventListener('click', () => {
                document.getElementById('taskMemberName').textContent = member.name;
                updateTasksTable(member.name);
            });
            table.appendChild(row);
        });
    }

    function deleteMember(name) {
        members = members.filter(member => member.name !== name);
        delete memberTasks[name];
        updateMembersTable();
        updateChart();
    }

    function updateChart() {
        const ctx = document.getElementById('talentChart').getContext('2d');
        const data = {
            labels: members.map(member => member.name),
            datasets: [
                {
                    label: 'Talent Rating',
                    data: members.map(member => {
                        switch (member.talent) {
                            case 'Critical': return 5;
                            case 'High': return 4;
                            case 'Moderate': return 3;
                            case 'Low': return 2;
                            case 'Emerging': return 1;
                            default: return 0;
                        }
                    }),
                    backgroundColor: 'rgba(54, 162, 235, 0.5)',
                    borderColor: 'rgba(54, 162, 235, 1)',
                    borderWidth: 1
                },
                {
                    label: 'Average Task Importance',
                    data: members.map(member => {
                        const tasks = memberTasks[member.name];
                        if (tasks.length === 0) return 0;
                        const totalImportance = tasks.reduce((acc, task) => {
                            switch (task.importance) {
                                case 'High': return acc + 10;
                                case 'Medium': return acc + 5;
                                case 'Low': return acc + 2;
                                default: return acc;
                            }
                        }, 0);
                        return totalImportance / tasks.length;
                    }),
                    backgroundColor: 'rgba(75, 192, 192, 0.5)',
                    borderColor: 'rgba(75, 192, 192, 1)',
                    borderWidth: 1
                }
            ]
        };

        if (window.talentChartInstance) {
            window.talentChartInstance.destroy();
        }

        window.talentChartInstance = new Chart(ctx, {
            type: 'bar',
            data,
            options: {
                scales: {
                    y: {
                        beginAtZero: true,
                        max: 10
                    }
                }
            }
        });
    }

    document.getElementById('taskForm').addEventListener('submit', function (e) {
        e.preventDefault();
        const memberName = document.getElementById('taskMemberName').textContent;
        const taskName = document.getElementById('taskName').value;
        const importance = document.getElementById('taskImportance').value;
        const timeQuality = document.getElementById('taskTimeQuality').value;
        const skills = document.getElementById('taskSkills').value;

        if (memberName && memberTasks[memberName]) {
            memberTasks[memberName].push({ taskName, importance, timeQuality, skills });
            updateTasksTable(memberName);
            updateChart();
            document.getElementById('taskForm').reset();
        } else {
            alert('Please select a team member first.');
        }
    });

    function updateTasksTable(memberName) {
        const table = document.getElementById('tasksTable');
        table.innerHTML = '';
        const tasks = memberTasks[memberName];
        tasks.forEach(task => {
            const row = document.createElement('tr');
            row.innerHTML = `
                <td>${task.taskName}</td>
                <td>${task.importance}</td>
                <td>${task.timeQuality}</td>
                <td>${task.skills}</td>
            `;
            table.appendChild(row);
        });
    }
</script>
</body>
</html>
