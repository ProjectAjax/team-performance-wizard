<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SkillsSync360 - Enhanced</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
            background-color: #f4f4f4;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background-color: #fff;
            padding: 20px;
            border-radius: 5px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        h1, h2, h3 {
            color: #333;
        }
        input, select {
            width: 100%;
            padding: 8px;
            margin-bottom: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        button {
            background-color: #4CAF50;
            color: white;
            padding: 10px 15px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin-right: 10px;
        }
        button:hover {
            background-color: #45a049;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: left;
        }
        th {
            background-color: #f2f2f2;
        }
        .task-row {
            display: flex;
            margin-bottom: 10px;
        }
        .task-row select, .task-row input {
            flex: 1;
            margin-right: 10px;
        }
        #reportContainer {
            margin-top: 20px;
        }
        .chart-container {
            width: 100%;
            max-width: 600px;
            margin: 20px auto;
        }
        .employee-row {
            cursor: pointer;
        }
        .employee-row:hover {
            background-color: #f5f5f5;
        }
        .selected-employee {
            background-color: #e6f7ff;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>SkillsSync360</h1>
        
        <h2>Add Team Member</h2>
        <input type="text" id="memberName" placeholder="Name">
        <input type="text" id="memberRole" placeholder="Role">
        <select id="talentRating">
            <option value="1">1 - Underperformer</option>
            <option value="2">2 - Inconsistent Performer</option>
            <option value="3">3 - Emerging Talent</option>
            <option value="4">4 - Steady Contributor</option>
            <option value="5">5 - Key Contributor</option>
            <option value="6">6 - Future Star</option>
            <option value="7">7 - Solid Performer</option>
            <option value="8">8 - High Performer</option>
            <option value="9">9 - Top Talent/Star</option>
        </select>
        <button onclick="addTeamMember()">Add Team Member</button>
        
        <h2>Team Members</h2>
        <table id="teamMembersTable">
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Role</th>
                    <th>Talent Rating</th>
                </tr>
            </thead>
            <tbody id="teamMembersBody"></tbody>
        </table>
        
        <h2>DILO Task Analysis</h2>
        <div id="taskAnalysis" style="display: none;">
            <h3>Task Analysis for <span id="selectedEmployeeName"></span></h3>
            <div id="taskContainer"></div>
            <button onclick="addTaskRow()">Add Task</button>
        </div>
        
        <button onclick="generateReport()">Generate Report</button>
        
        <div id="reportContainer"></div>
    </div>

    <script>
        const teamMembers = [];
        let selectedEmployee = null;

        const tasks = [
            "Develop project plans and timelines",
            "Coordinate with cross-functional teams",
            "Monitor project budgets",
            "Identify cost-saving opportunities",
            "Identify and mitigate project risks",
            "Provide regular stakeholder updates",
            "Manage stakeholder expectations",
            "Allocate resources effectively",
            "Conduct quality assurance checks",
            "Coordinate with vendors and suppliers",
            "Negotiate contracts with vendors",
            "Resolve project issues promptly",
            "Analyze project performance for improvements",
            "Attend excessive meetings",
            "Perform manual data entry",
            "Micromanage team members",
            "Handle routine administrative tasks",
            "Wait for unnecessary approvals",
            "Provide excessive status updates",
            "Create redundant documentation",
            "Manage non-critical emails"
        ];

        function addTeamMember() {
            const name = document.getElementById('memberName').value;
            const role = document.getElementById('memberRole').value;
            const talentRating = document.getElementById('talentRating').value;
            
            if (name && role && talentRating) {
                teamMembers.push({ name, role, talentRating, tasks: [] });
                updateTeamMembersTable();
                clearTeamMemberInputs();
            } else {
                alert('Please fill in all fields');
            }
        }

        function updateTeamMembersTable() {
            const tbody = document.getElementById('teamMembersBody');
            tbody.innerHTML = '';
            teamMembers.forEach((member, index) => {
                const row = tbody.insertRow();
                row.className = 'employee-row';
                row.onclick = () => selectEmployee(index);
                row.insertCell(0).textContent = member.name;
                row.insertCell(1).textContent = member.role;
                row.insertCell(2).textContent = member.talentRating;
            });
        }

        function selectEmployee(index) {
            selectedEmployee = teamMembers[index];
            document.querySelectorAll('.employee-row').forEach(row => row.classList.remove('selected-employee'));
            document.querySelectorAll('.employee-row')[index].classList.add('selected-employee');
            document.getElementById('selectedEmployeeName').textContent = selectedEmployee.name;
            document.getElementById('taskAnalysis').style.display = 'block';
            updateTaskContainer();
        }

        function clearTeamMemberInputs() {
            document.getElementById('memberName').value = '';
            document.getElementById('memberRole').value = '';
            document.getElementById('talentRating').value = '1';
        }

        function addTaskRow() {
            if (!selectedEmployee) {
                alert('Please select an employee first');
                return;
            }
            selectedEmployee.tasks.push({ name: '', valued: true, proficiency: 1 });
            updateTaskContainer();
        }

        function updateTaskContainer() {
            const container = document.getElementById('taskContainer');
            container.innerHTML = '';
            selectedEmployee.tasks.forEach((task, index) => {
                const row = document.createElement('div');
                row.className = 'task-row';
                row.innerHTML = `
                    <select onchange="updateTask(${index}, 'name', this.value)">
                        <option value="">Select a task</option>
                        ${tasks.map(t => `<option value="${t}" ${task.name === t ? 'selected' : ''}>${t}</option>`).join('')}
                    </select>
                    <select onchange="updateTask(${index}, 'valued', this.value === 'true')">
                        <option value="true" ${task.valued ? 'selected' : ''}>Valued</option>
                        <option value="false" ${!task.valued ? 'selected' : ''}>Non-Valued</option>
                    </select>
                    <select onchange="updateTask(${index}, 'proficiency', parseInt(this.value))">
                        ${[1, 2, 3, 4, 5, 6].map(p => `<option value="${p}" ${task.proficiency === p ? 'selected' : ''}>${p}</option>`).join('')}
                    </select>
                `;
                container.appendChild(row);
            });
        }

        function updateTask(index, property, value) {
            selectedEmployee.tasks[index][property] = value;
        }

        function generateReport() {
            const reportContainer = document.getElementById('reportContainer');
            reportContainer.innerHTML = '<h2>Generated Report</h2>';

            // 1. Talent Distribution Report
            const talentDistribution = teamMembers.reduce((acc, member) => {
                acc[member.talentRating] = (acc[member.talentRating] || 0) + 1;
                return acc;
            }, {});

            reportContainer.innerHTML += '<div class="chart-container"><canvas id="talentChart"></canvas></div>';
            new Chart(document.getElementById('talentChart').getContext('2d'), {
                type: 'pie',
                data: {
                    labels: Object.keys(talentDistribution),
                    datasets: [{
                        data: Object.values(talentDistribution),
                        backgroundColor: ['#FF6384', '#36A2EB', '#FFCE56', '#4BC0C0', '#9966FF', '#FF9F40', '#FF6384', '#36A2EB', '#FFCE56']
                    }]
                },
                options: {
                    responsive: true,
                    title: { display: true, text: 'Talent Distribution' }
                }
            });

            // 2. Valued vs Non-valued Task Distribution
            const taskDistribution = { valued: 0, nonValued: 0 };
            teamMembers.forEach(member => {
                member.tasks.forEach(task => {
                    if (task.valued) taskDistribution.valued++;
                    else taskDistribution.nonValued++;
                });
            });

            reportContainer.innerHTML += '<div class="chart-container"><canvas id="taskDistributionChart"></canvas></div>';
            new Chart(document.getElementById('taskDistributionChart').getContext('2d'), {
                type: 'pie',
                data: {
                    labels: ['Valued Tasks', 'Non-valued Tasks'],
                    datasets: [{
                        data: [taskDistribution.valued, taskDistribution.nonValued],
                        backgroundColor: ['#36A2EB', '#FF6384']
                    }]
                },
                options: {
                    responsive: true,
                    title: { display: true, text: 'Task Distribution' }
                }
            });

            // 3. Proficiency Level Distribution
            const proficiencyDistribution = teamMembers.reduce((acc, member) => {
                member.tasks.forEach(task => {
                    acc[task.proficiency] = (acc[task.proficiency] || 0) + 1;
                });
                return acc;
            }, {});

            reportContainer.innerHTML += '<div class="chart-container"><canvas id="proficiencyChart"></canvas></div>';
            new Chart(document.getElementById('proficiencyChart').getContext('2d'), {
                type: 'bar',
                data: {
                    labels: Object.keys(proficiencyDistribution),
                    datasets: [{
                        label: 'Proficiency Level Distribution',
                        data: Object.values(proficiencyDistribution),
                        backgroundColor: '#4BC0C0'
                    }]
                },
                options: {
                    responsive: true,
                    scales: { y: { beginAtZero: true } },
                    title: { display: true, text: 'Proficiency Level Distribution' }
                }
            });

            // 4. Top 5 Most Common Tasks
            const taskCounts = teamMembers.reduce((acc, member) => {
                member.tasks.forEach(task => {
                    acc[task.name] = (acc[task.name] || 0) + 1;
                });
                return acc;
            }, {});

            const topTasks = Object.entries(taskCounts)
                .sort((a, b) => b[1] - a[1])
                .slice(0, 5);

            reportContainer.innerHTML += '<div class="chart-container"><canvas id="topTasksChart"></canvas></div>';
            new Chart(document.getElementById('topTasksChart').getContext('2d'), {
                type: 'horizontalBar',
                data: {
                    labels: topTasks.map(task => task[0]),
                    datasets: [{
                        label: 'Task Frequency',
                        data: topTasks.map(task => task[1]),
                        backgroundColor: '#FF9F40'
                    }]
                },
                options: {
                    responsive: true,
                    scales: { x: { beginAtZero: true } },
                    title: { display: true, text: 'Top 5 Most Common Tasks' }
                }
            });
        }

        // Initialize with some sample data
        teamMembers.push(
            { name: "Mike", role: "PM", talentRating: "4", tasks: [] },
            { name: "Bec", role: "PM", talentRating: "6", tasks: [] },
            { name: "John", role: "PM", talentRating: "7", tasks: [] }
        );
        updateTeamMembersTable();
    </script>
</body>
</html>
